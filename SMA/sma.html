<!DOCTYPE html>
<html lang="en" style='scroll-behavior: unset;'>

<head>
    <meta name="viewport" content="initial-scale = 1, user-scalable = no" />
    <meta charset="UTF-8">

    <link href="../engine/css/normalize.css" rel="stylesheet" type="text/css" />
    <link href="../engine/css/master.css" rel="stylesheet" type="text/css" />

    <link href="./css/sma.css" rel="stylesheet" type="text/css" />

    <!-- External libraries -->
    <script src="../engine/js/jquery-3.4.1.min.js" type="text/javascript"></script>

</head>

<body id='sma-body'>
    <div class="close-sma" onclick="window.parent.postMessage('closeSMA', '*')">
        <div>×</div>
    </div>

    <div class="sma-top-fold">
        <div class="sma-page-margin">

            <div class='sma-header'>
                <div id='sma-page-header' class='sma-header-text p-34'>
                    Captial Group SMA Information
                </div>
                <!-- <button class="p-disclosure-btn" id="p-disclosure" onclick="jumpToDisclosures()">
                    Investment disclosures
                </button> -->
            </div>

            <div class='sma-top-disc bold p-18' style='width: 100%; opacity: 0; pointer-events: none;'>
                Figures shown are past results for Class F-2 shares and are not predictive of results in future periods.
                Current and future results may be lower or higher than those shown. Prices and returns will vary, so
                investors may lose money. Investing for short periods makes losses more likely.
                For current information and month-end results,
                visit<span onclick="goWeb('https://capitalgroup.com')"
                    style='text-decoration: underline; cursor:pointer; color: #005F9E;'> capitalgroup.com</span>.
            </div>


            <div class="sma-main-container">

                <div class='sma-section'>
                    <div>
                        <div id='sma-0-title' class="sma-section-text p-16 demi">
                            Percentage of time composite led/lagged index
                        </div>
                        <div id="sma-0-sub" class='sma-section-text-sm p-16'>Rolling monthly periods since inception
                            through
                            12/31/21xxxx
                        </div>
                    </div>

                    <div class='legend-row' style="margin-bottom: 2%;">
                        <div class="legend-wrapper p-16">
                            <div class='legend-item'>
                                <div class="dot-one legend-dot"></div>
                                Composite led index
                            </div>
                            <div class='legend-item'>
                                <div class="dot-two legend-dot"></div>
                                Composite lagged index
                            </div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 60% 37%; height: 88%;">
                        <div class="pr">
                            <div class="pa" style="width: 50%; height: 100%" id="chart-sma-0">
                                <div class="sma-0-text pa center p-20 demi"
                                    style="width: 100%; color: #6F6F6F; top: 15%;">
                                    Gross
                                </div>
                            </div>
                            <div class="pa" style="width: 50%; left: 43%; height: 100%" id="chart-sma-1">
                                <div class="sma-0-text pa center p-20 demi"
                                    style="width: 100%; color: #6F6F6F; top: 15%;">
                                    Net
                                </div>
                            </div>

                        </div>
                        <div class="pr">
                            <div class="p-16 demi pa">Difference between average returns (%)</div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr;    top: 15%;
                            position: relative; ">
                                <div class="pr">
                                    <div class="sma-0-text pa center p-20 demi"
                                        style="width: 100%; color: #6F6F6F; top: 15%;">
                                        Gross
                                    </div>
                                </div>
                                <div class="pr">
                                    <div class="sma-0-text pa center p-20 demi"
                                        style="width: 100%; color: #6F6F6F; top: 15%;">
                                        Net
                                    </div>
                                </div>
                            </div>

                            <div class="pa" style="width: 100%; height: 100%" id="chart-sma-2"></div>
                        </div>
                    </div>
                </div>

                <div class='sma-section'>
                    <div>
                        <div id='sma-1-title' class="sma-section-text p-16 demi">
                            ---
                        </div>
                        <div class='sma-section-text-sm p-16 date-text'>Rolling periods since inception through 12/31/21
                        </div>
                    </div>

                    <div class='legend-row'>
                        <div class="legend-wrapper p-16">
                            <div class='legend-item'>
                                <div class="dot-one legend-dot"></div>
                                <div class="rolling-periods-legend">
                                    Composite returns “pure” gross of fees
                                </div>
                            </div>
                            <div class='legend-item'>
                                <div class="dot-two legend-dot"></div>
                                <div class="rolling-periods-legend">
                                    Composite returns net of fees
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id='stacked-bar-chart'></div>
                </div>

                <div class='sma-section'>
                    <div>
                        <div id='sma-2-title' class="sma-section-text p-16 demi">
                            ---
                        </div>
                        <div class='sma-section-text-sm p-16 date-text'>Rolling one-year periods since inception through
                            12/31/21
                        </div>
                    </div>

                    <div class='legend-row'>
                        <div class="legend-wrapper p-16">
                            <div class='legend-item'>
                                <div class="dot-one legend-dot"></div>
                                <div class="excess-returns-legend">
                                    Composite returns “pure” gross of fees
                                </div>
                            </div>
                            <div class='legend-item'>
                                <div class="dot-two legend-dot"></div>
                                <div class="excess-returns-legend">
                                    Composite returns net of fees
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class='four-cols p-22'>
                        <div class='bar-chart' id='bar-chart-x'></div>
                        <div class='bar-chart' id='bar-chart-0'></div>
                        <div class='bar-chart' id='bar-chart-1'></div>
                        <div class='bar-chart' id='bar-chart-2'></div>

                        <div class='bar-chart-text bold'>When the index return was</div>
                        <div class='bc-big bold'>&#60;0%</div>
                        <div class='bc-big bold'>0%—15%</div>
                        <div class='bc-big bold'>>15%</div>

                        <div class='bar-chart-text'>Outperformance frequency (gross)</div>
                        <div class='bc-big'></div>
                        <div class='bc-big'></div>
                        <div class='bc-big'></div>

                        <div class='bar-chart-text'>Outperformance frequency (net)</div>
                        <div class='bc-big'></div>
                        <div class='bc-big'></div>
                        <div class='bc-big'></div>
                    </div>

                </div>

                <div class='sma-section ffc'>
                    <div>
                        <div class="sma-section-text p-16 demi">Rates of returns (%)</div>
                        <div id='sma-3-title' class='sma-section-text-sm p-16'>As of </div>
                    </div>

                    <div class="lower-section">
                        <div class="return-grid p-18">
                            <div class="return-r1" style='display: none;'>
                                <div style="font-weight: 500; margin-right: .4rem">Composite inception date
                                </div>
                                <div class='return-date'>4/30/84x</div>
                            </div>

                            <div></div>
                            <div class="navy-b br p-18 demi">Cumulative return (%)</div>
                            <div class="navy-b p-18 demi" style='grid-column: 3/6;'>Average annual return (%)</div>

                            <div></div>
                            <div class="p-16 demi lite-b br">1 year</div>
                            <div class="p-16 demi lite-b">5 years</div>
                            <div class="p-16 demi lite-b z1">10 years</div>
                            <div class="p-16 demi lite-b shade">Lifetime</div>

                            <div id="rate-of-return-line-1" class="p-18 demi grey-b bb">”Pure” gross</div>
                            <div class="p-18 data3 white-b bb2">99.9</div>
                            <div class="p-18 data3 white-b bb2">99.9</div>
                            <div class="p-18 data3 white-b bb2 z1">99.9</div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>

                            <div class="p-18 demi grey-b bb z1">Net of fees</div>
                            <div class="p-18 data3 white-b bb2 z1">99.9</div>
                            <div class="p-18 data3 white-b bb2 z1">99.9</div>
                            <div class="p-18 data3 white-b bb2 z1">99.9</div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>

                            <div id="index-label" class="p-18 demi grey-b shade">
                                Capital Group International Growth Composite Benchmarks Index*
                            </div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>
                            <div class="p-18 data3 white-b bb2 shade">99.9</div>

                        </div>

                        <div class="return-grid return-grid-2">
                            <div class="return-r1" style='grid-column: 1 / 10;'>
                                <div style="font-weight: 500; margin-right: .4rem;">Composite inception date</div>
                                <div class='return-date'>3/31/73x</div>
                            </div>

                            <div></div>
                            <div class="navy-b br" style='grid-column: 2/5;'>Cumulative return (%)</div>
                            <div class="navy-b " style='grid-column: 5/10;'>Average annual return (%)</div>

                            <div></div>
                            <div class="lite-b ">QTD</div>
                            <div class="lite-b ">YTD</div>
                            <div class="lite-b br">1 Year</div>
                            <div class="lite-b">3 years</div>
                            <div class="lite-b">5 years</div>
                            <div class="lite-b">7 years</div>
                            <div class="lite-b z1">10 years</div>
                            <div class="lite-b shade">Lifetime</div>

                            <div class="grey-b bb">”Pure” gross</div>
                            <div class="data3b white-b bb2">99.9</div>
                            <div class="data3b white-b bb2">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2">99.9</div>
                            <div class="data3b white-b bb2">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>

                            <div class="grey-b bb z1">Net of fees</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 z1">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>

                            <div class="grey-b shade">MSCI All Country World Index (ACWI)
                            </div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>
                            <div class="data3b white-b bb2 shade">99.9</div>

                        </div>
                    </div>
                </div>

                <div class='sma-section ffc'>
                    <div>
                        <div id='sma-4-title' class="sma-section-text">Composite information in USD</div>
                        <!-- <div class='sma-section-text-sm'>Rolling one-year periods since inception through 9/30/20</div> -->
                    </div>

                    <div class='kevin-spacer'></div>

                    <div class="lower-section">
                        <div class="twelve-cols ">
                            <div class='grid-header' style='text-align: left; padding-left: 0;'>Period ending</div>
                            <div class='grid-header'>Annual composite “pure” gross return (%)</div>
                            <div class='grid-header'>Annual composite net return (%)</div>
                            <div class='grid-header'>Annual index return (%)</div>
                            <div class='grid-header'>Annualized three-year composite standard deviation (%)</div>
                            <div class='grid-header'>Annualized three-year index standard deviation (%)</div>
                            <div class='grid-header'>Annual composite dispersion (%)</div>
                            <div class='grid-header'>Number of portfolios in composite</div>
                            <div class='grid-header'>Assets in composite (millions)</div>
                            <div class='grid-header'>Total GIPS firm assets (millions)</div>
                            <div class='grid-header'>Percentage of SMA portfolios</div>
                            <div class='grid-header'>Percentage of non-fee paying portfolios</div>

                            <div style='grid-column: 1/13;'></div>
                            <div class='grey-border' style='grid-column: 1/13;'></div>
                            <div style='grid-column: 1/13;'></div>

                            <div class='col-1-text'>12/31/2010</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2011</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2012</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2013</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2014</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2015</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2016</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2017</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2018</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                            <div class='col-1-text'>12/31/2019</div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>
                            <div class='grid-text data4-0'></div>

                        </div>

                        <div class="twelve-cols">
                            <div class='grid-header' style='text-align: left; padding-left: 0;'>Period ending</div>
                            <div class='grid-header'>Annual composite “pure” gross return (%)</div>
                            <div class='grid-header'>Annual composite net return (%)</div>
                            <div class='grid-header'>Annual index return (%)</div>
                            <div class='grid-header'>Annualized three-year composite standard deviation (%)</div>
                            <div class='grid-header'>Annualized three-year index standard deviation (%)</div>
                            <div class='grid-header'>Annual composite dispersion (%)</div>
                            <div class='grid-header'>Number of portfolios in composite</div>
                            <div class='grid-header'>Assets in composite (millions)</div>
                            <div class='grid-header'>Total GIPS firm assets (millions)</div>
                            <div class='grid-header'>Percentage of SMA portfolios</div>
                            <div class='grid-header'>Percentage of non-fee paying portfolios</div>

                            <div style='grid-column: 1/13;'></div>
                            <div class='grey-border' style='grid-column: 1/13;'></div>
                            <div style='grid-column: 1/13;'></div>

                            <div class='col-1-text'>12/31/2010</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2011</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2012</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2013</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2014</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2015</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2016</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2017</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2018</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                            <div class='col-1-text'>12/31/2019</div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>
                            <div class='grid-text data4-1'></div>

                        </div>

                        <div class="twelve-cols eleven-cols">
                            <div class='grid-header' style='text-align: left; padding-left: 0;'>Period ending</div>
                            <div class='grid-header'>Annual composite “pure” gross return (%)</div>
                            <div class='grid-header'>Annual composite Net return (%)</div>
                            <div class='grid-header'>Annual index return (%)</div>
                            <div class='grid-header'>Annualized three-year composite standard deviation (%)</div>
                            <div class='grid-header'>Annualized three-year index standard deviation (%)</div>
                            <div class='grid-header'>Annual composite dispersion (%)</div>
                            <div class='grid-header'>Number of portfolios in composite</div>
                            <div class='grid-header'>Assets in composite (millions)</div>
                            <div class='grid-header'>Total GIPS firm assets (millions)</div>
                            <div class='grid-header'>Percentage of SMA portfolios</div>

                            <div style='grid-column: 1/12;'></div>
                            <div class='grey-border' style='grid-column: 1/12;'></div>
                            <div style='grid-column: 1/12;'></div>

                            <div class='col-1-text'>12/31/2010</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2011</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2012</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2013</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2014</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2015</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2016</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2017</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2018</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                            <div class='col-1-text'>12/31/2019</div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>
                            <div class='grid-text data4-2'></div>

                        </div>

                        <div class="twelve-cols eleven-cols">
                            <div class='grid-header' style='text-align: left; padding-left: 0;'>Period ending</div>
                            <div class='grid-header'>Annual composite “pure” gross return (%)</div>
                            <div class='grid-header'>Annual composite Net return (%)</div>
                            <div class='grid-header'>Annual index return (%)</div>
                            <div class='grid-header'>Annualized three-year composite standard deviation (%)</div>
                            <div class='grid-header'>Annualized three-year index standard deviation (%)</div>
                            <div class='grid-header'>Annual composite dispersion (%)</div>
                            <div class='grid-header'>Number of portfolios in composite</div>
                            <div class='grid-header'>Assets in composite (millions)</div>
                            <div class='grid-header'>Total GIPS firm assets (millions)</div>
                            <div class='grid-header'>Percentage of SMA portfolios</div>

                            <div style='grid-column: 1/12;'></div>
                            <div class='grey-border' style='grid-column: 1/12;'></div>
                            <div style='grid-column: 1/12;'></div>


                            <div class='col-1-text'>12/31/2010</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2011</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2012</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2013</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2014</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2015</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2016</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2017</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2018</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>

                            <div class='col-1-text'>12/31/2019</div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                            <div class='grid-text data4-3'></div>
                        </div>
                    </div>
                </div>

                <div class="line-toggle-container">
                    <div class="sma-toggle p-12 bold" id='toggle-3'>
                        <div style="width: 25%;" id="sma-pill-toggle"></div>
                        <button class='sma-button' id="sma-section-n1" onclick="showSMAsection(0)">
                            lifetime success
                        </button>
                        <button class='sma-button' id="sma-section-0" onclick="showSMAsection(1)">
                            rolling periods
                        </button>
                        <button class='sma-button' id="sma-section-1" onclick="showSMAsection(2)">
                            EXCESS RETURNS
                        </button>
                        <button class='sma-button' id="sma-section-2" onclick="showSMAsection(3)">
                            Rate of return
                        </button>
                        <!-- <button class='sma-button' id="sma-section-3" onclick="showSMAsection(3)">
                            Composite information
                        </button> -->
                    </div>
                </div>

            </div>
        </div>
    </div>

    <footer class="p-16 pr" id="legal-sma" style='padding: 3%;'>

    </footer>

</body>


<script src='./data/smaNumbers.js'></script>
<script src='./data/data.js'></script>

<script src='../engine/js/d3.min.js'></script>
<!-- <script src='./disclosures/cgig.js'></script> -->
<script src='./disclosures/cggg.js'></script>
<!-- <script src='./disclosures/cgie.js'></script> -->
<!-- <script src='./disclosures/cgge.js'></script> -->
<script src='./disclosures/cgusig.js'></script>
<script src='./disclosures/cgfg.js'></script>

<script>
    let currentSMAid;
    let donutChart1;
    let donutChart2;
    let barChartFirstSection;
    let stackedBarChart;
    let barChartx;
    let barChart0;
    let barChart1;
    let barChart2;

    // **************************************************************** //
    // GET INCOMING MESSAGE WHEN OPENING TEMPLATE
    // **************************************************************** //
    // called when user clicks on SMA square component
    function receiveMessage(event) {

        if (event.origin.startsWith('https://h') || event.origin.startsWith('http://127.0.0.1') || event.origin === 'null' || event.origin.startsWith('file://capgr') || event.origin.startsWith('http://local')) {

            const smaID = event.data.split('\n')[0].trim();
            drawSMAPage(smaID);

        } else {
            console.log('recieved message, but bad URI')
        }
    }

    // LISTEN FOR INCOMING MESSAGE
    if (window.addEventListener) {
        // For standards-compliant web browsers
        window.addEventListener("message", receiveMessage, false);
    }
    else {
        window.attachEvent("onmessage", receiveMessage);
    }

    function scrollToTop(e = null) {
        if (e)
            e.preventDefault();
        $('html, body').animate(
            {
                scrollTop: 0
            },
            700,
            'swing'
        );
    }

    // DON'T ALLOW PARENT TO OPEN IFRAME UNTIL IFRAME SOURCE IS BUILT AND READY
    document.addEventListener('DOMContentLoaded', () => {
        const myInterval =
            setInterval(() => {
                if (data) {
                    console.warn('SMAdata found and sending message to parent')
                    window.localStorage.setItem('SMAdata', JSON.stringify(data));

                    clearInterval(myInterval)
                    window.parent.postMessage('SMAready', '*');

                    setTimeout(() => {
                        console.warn('SMAdata found and sending message to parent (2)')
                        window.parent.postMessage('SMAready', '*');
                    }, 5000);
                } else {
                    console.warn('SMAdata not found... yet')
                }
            }, 250);
    })




    async function drawSMAPage(id) {

        // START SCROLL POSITION FROM TOP WHEN CALLED FOR FIRST TIME (ms edge)
        document.body.scrollTop = 0; //Zero is the pixels from the top of the screen
        document.documentElement.scrollTop = 0;

        currentSMAid = id;
        console.log('finding', id)
        SMAdata = await find(JSON.parse(window.localStorage.getItem('SMAdata')));
        console.log('found SMA', SMAdata.id)

        // WAIT FOR DATA TO BE FOUND BEFORE OPENING
        window.parent.postMessage('openSMA', '*');

        async function find(data) {

            let promise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(data.find((d, i) => {
                        console.log('sma', i, d.id)
                        return d.id === currentSMAid;
                    }))
                }, window.navigator.userAgent.includes('Edge') ? 200 : 0);
            });

            return await promise; // "done!"
        }

        // SET PAGE TITLES DEPENDING ON PAGE-DATA
        setSMAtitles(SMAdata);

        // ......................
        const data = await findData();

        async function findData() {
            let promise = new Promise((res, rej) => {
                setTimeout(() => {
                    res(RAWSMA.find(d => d.id === id))
                }, window.navigator.userAgent.includes('Edge') ? 200 : 0);
            })

            return await promise; // "done!"
        }

        // section 1 (new), two donuts and bars
        // donuts
        donutChart1 = new drawDonut('chart-sma-0', [data.donutData.donut1, 100 - data.donutData.donut1], [COLOR1, COLOR2]);
        donutChart2 = new drawDonut('chart-sma-1', [data.donutData.donut2, 100 - data.donutData.donut2], [COLOR1, COLOR2], 111);

        // bars
        barChartFirstSection = new drawFirstBars('chart-sma-2', data.barData)

        // section 2
        stackedBarChart = new drawStacks('stacked-bar-chart', data.data);


        const zeroBar = [
            { fill: 0, name: 0, value: 0, },
            { fill: 1, name: 1, value: 0, },
        ]

        // section 3 (side by side bar charts)
        barChartx = new drawBars('bar-chart-x', zeroBar, 50, 0, data.data2b);
        barChart0 = new drawBars('bar-chart-0', data.data2[0], 0, 0);
        barChart1 = new drawBars('bar-chart-1', data.data2[1], 0, 0);
        barChart2 = new drawBars('bar-chart-2', data.data2[2], 0, 50);

        // section 4 (rate of return table)
        updateSection3(data);

        // section 5 (we dont even show this table anymore)
        updateSection4(data);

        // disclosures
        insertDisclosureText(data.id);
    }

    ////////////////////////////////////////////////////////////
    function jumpToDisclosures() {
        const bottom = document.body.offsetHeight - window.innerHeight;
        const legal = document.querySelector('.sma-top-fold').offsetHeight - 5;
        const jump = Math.min(bottom, legal);

        $('html, body').animate(
            {
                scrollTop: jump
            },
            700,
            'swing'
        );
    }

    const smaButtons = document.querySelectorAll('.sma-button');
    const smaSections = document.querySelectorAll('.sma-section');

    ////////////////////////////////////////////////////////
    function showSMAsection(num) {
        const slider3 = document.getElementById('sma-pill-toggle');

        smaButtons.forEach((b, i) => {
            if (num === i)
                b.style.color = '#00294B';
            else
                b.style.color = '#7F7F7F'

        })

        if (num === 0) {
            slider3.style.left = 0;
        } else if (num === 1) {
            slider3.style.left = '25%';
        } else if (num === 2) {
            slider3.style.left = '50%';
        } else if (num === 3) {
            slider3.style.left = '75%';
        }

        smaSections.forEach((s, i) => {
            if (num === i)
                s.style.opacity = '1';
            else
                s.style.opacity = '0';
        });


        // stackedBarChart.redraw();
        setDisclosure(num);
    }

    ///////////////////////////////////////////
    function setSMAtitles(data) {
        // document.getElementById('sma-0-title').innerText = null;
        document.getElementById('sma-0-sub').innerText = data.sma0; // the date
        document.querySelectorAll('.date-text').forEach(el => el.innerHTML = data.sma0)
        document.querySelectorAll('.rolling-periods-legend').forEach((el, i) => el.innerHTML = data.rollingPeriodsLegend[i])
        document.querySelectorAll('.excess-returns-legend').forEach((el, i) => el.innerHTML = data.excessReturnsLegend[i])
        document.getElementById('rate-of-return-line-1').innerText = data.rateOfReturnLine1;
        document.querySelectorAll('.sma-0-text').forEach((el, i) => el.innerText = data.sma0Text[i])
        document.getElementById('sma-1-title').innerText = data.sma1;
        document.getElementById('sma-2-title').innerText = data.sma2;
        document.getElementById('sma-3-title').innerText = data.sma3;
        document.getElementById('sma-4-title').innerText = data.sma4;
        document.getElementById('sma-page-header').innerHTML = data.header;
        document.getElementById('index-label').innerHTML = data.indexLabel;
    }

    ////////////////////////////////////////////////
    function updateSection3(data) {

        const ELEMENTNAMES = '.data3';
        // data.id === 'CGIG' ?  : '.data3b';

        const GRID1 = document.querySelector('.return-grid');
        const GRID2 = document.querySelector('.return-grid-2');

        // if (data.id === 'CGIG') {
        GRID1.style.opacity = 1;
        GRID1.style.display = 'grid';

        GRID2.style.opacity = 0;
        GRID2.style.display = 'none';
        // } else {
        //     GRID1.style.opacity = 0;
        //     GRID1.style.display = 'none';

        //     GRID2.style.opacity = 1;
        //     GRID2.style.display = 'grid';
        // }

        const texts = document.querySelectorAll(ELEMENTNAMES);

        texts.forEach((el, i) => {
            el.innerHTML = data.data3[i]
        })

        const dates = document.querySelectorAll('.return-date');
        dates.forEach(d => {
            d.innerHTML = data.data3data;
        })
    }

    ////////////////////////////////////////////////
    function updateSection4(data) {

        // if (data.id !== 'CGGG') {
        //     return
        // }

        let num;
        if (data.id === 'CGIG') {
            num = 0;
        } else if (data.id === 'CGGG') {
            num = 1;
        } else if (data.id === 'CGIE') {
            num = 2;
        } else if (data.id === 'CGGE') {
            num = 3;
        } else if (data.id === 'CGUSIG' || data.id === 'CGFG') {
            num = -99;
        } else {
            console.warn('something else was supposed to happen here')
        }

        const tables = document.querySelectorAll('.twelve-cols');

        tables.forEach((t, i) => {
            if (i === num) {
                t.style.display = 'grid'
            } else {
                t.style.display = 'none';
            }
        })

        const textFields = document.querySelectorAll(`.data4-${num}`)

        textFields.forEach((t, i) => {
            t.innerHTML = data.data4[i];
        })
    }

    /////////////////////////////////////////////////
    function insertDisclosureText(id) {
        const footer = document.getElementById('legal-sma')
        if (id === 'CGIG') {
            footer.innerHTML = CGIGDisc;
        } else if (id === 'CGGG') {
            footer.innerHTML = CGGGDisc;
        } else if (id === 'CGIE') {
            footer.innerHTML = CGIEDisc;
        } else if (id === 'CGGE') {
            footer.innerHTML = CGGEDisc;
        } else if (id === 'CGUSIG') {
            footer.innerHTML = CGUSIGDisc;
        } else if (id === 'CGFG') {
            footer.innerHTML = CGFGDisc;
        } else {
            footer.innerHTML = '© 2022 Capital Group';
        }
    }

    //////////////////////////////////////////////
    function setDisclosure(num) {
        const allDisc = document.querySelectorAll('.disc-text');

        allDisc.forEach((el, i) => {
            if (i === num) {
                el.style.display = 'block';
                setTimeout(() => {
                    el.style.opacity = 1;
                }, 200);
            } else {
                el.style.opacity = 0;

                setTimeout(() => {
                    el.style.display = 'none';
                }, 300);
            }
        })
    }

    // COLOR SCALE
    const COLOR1 = '#009CDC'; //
    const COLOR2 = '#00294B'; //

    ////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////
    class drawDonut {
        constructor(el, data, colors, delay = 0) {
            console.warn('pie time')

            const vis = this;
            vis.el = el
            vis.draws = 0;
            vis.drawn = false;
            vis.data = data.filter(d => d !== 0)
            vis.colors = colors;
            vis.delay = delay
            vis.init();
        }

        init() {
            const vis = this;

            // MAIN SVG
            vis.chartDiv = document.getElementById(vis.el);

            if (vis.chartDiv.querySelector('svg'))
                vis.chartDiv.querySelector('svg').remove()

            vis.svg = d3.select(vis.chartDiv).append('svg').attr('class', `pie-svg`);

            // APPEND G
            vis.g = vis.svg.append('g').attr('class', 'g-class');

            // APPEND PIE WEDGES
            vis.slices = vis.g.append("g").attr("class", "slices");

            if (vis.chartDiv.querySelector('.donut-value'))
                vis.chartDiv.querySelectorAll('.donut-value').forEach(el => el.innerHTML = ''); // destroy

            vis.text = d3.select(vis.chartDiv).append('div').attr('class', 'donut-value p-30 demi center')
                .style('position', 'absolute')
                .style('width', '100%')
                .style('top', '50%')
                .html(`${vis.data[0]}<sup>%</sup>`)

            vis.redraw();
        }

        redraw() {

            const vis = this;
            vis.draws++;
            console.warn('darws', vis.draws)

            const outerWidth = .33; // for donut wedges
            const innerWidth = .2; // for donut wedges

            vis.MARGIN = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            };

            vis.width = vis.chartDiv.clientWidth;
            vis.height = vis.chartDiv.clientHeight;
            const RADIUS = d3.min([vis.width, vis.height]);
            vis.gWIDTH = vis.width - (vis.MARGIN.left + vis.MARGIN.right);
            vis.gHEIGHT = vis.height - (vis.MARGIN.top + vis.MARGIN.bottom);

            // Use the extracted size to set the size of an SVG element.
            vis.svg.attr('width', vis.width).attr('height', vis.height);

            // SET G
            vis.g
                .attr('width', vis.gWIDTH)
                .attr('height', vis.gHEIGHT)
                .attr('transform', `translate(${vis.gWIDTH * .5 + vis.MARGIN.left}, ${vis.gHEIGHT * .5 + vis.MARGIN.top})`);

            // SETUP PIE
            const rotateVal = 0;
            const pieGenerator = d3
                .pie()
                .padAngle(0.02)
                .startAngle(0 * Math.PI - rotateVal)
                .endAngle(2 * Math.PI)
                .value(d => d)
                .sort((a, b) => {
                    return null;
                });

            const arc = d3.arc()
                .outerRadius(RADIUS * outerWidth)
                .innerRadius(RADIUS * innerWidth)

            const arcData = pieGenerator(vis.data);
            vis.numberOfSlices = arcData.length;

            const colorKeys = arcData.map(d => d.index);
            // color scale
            vis.colorScale = d3
                .scaleOrdinal()
                .domain(colorKeys)
                .range(vis.colors);

            // JOIN DONUT SLICES
            let donutVis = vis.slices.selectAll('path')
                .data(arcData);
            // EXIT
            donutVis.exit().remove();

            // UPDATE
            // idk why this if check is needed, but seems like it is needed
            if (vis.drawn) {
                donutVis
                    .transition()
                    .duration(500)
                    .style('opacity', 1)
                    .attr('fill', (d, i) => vis.colorScale(d.index))
                    .attrTween('d', arcTween)
            }

            // ENTER
            donutVis
                .enter()
                .append('path')
                .attr('class', 'donut-wedge')
                .attr('id', (d, i) => `donut-wedge-${colorKeys.indexOf(d.index)}`)
                .attr('fill', (d, i) => vis.colorScale(d.index))
                .transition()
                .duration(1000)
                .delay(444 + vis.delay)
                .attrTween('d', d => {
                    let i = d3.interpolate(d.startAngle, d.endAngle);
                    return t => {
                        d.endAngle = i(t);
                        return arc(d)
                    }
                })
            // .attrTween('d', arcTween) // THIS GETS READY FOR THE UPDATE TWEEN

            function arcTween(d) {
                let i = d3.interpolate(this._current, d);
                this._current = i(0);
                return t => {
                    return arc(i(t));
                };
            }

            vis.text
                .style('margin-top', vis.text.node().clientHeight * -.51 + 'px')

            if (vis.draws === 1) {
                setTimeout(() => {
                    vis.drawn = true;
                }, 1000);
            }
        } // END REDRAW
        //////////////////////////////
    }

    ///////////////////////////////////////
    ///////////////////////////////////////
    //////////////////////////////////////
    ////////////////////////////////////
    /////////////////////////////////
    ////////////////////////////
    ///////////////////////
    ////////////////////
    ////////////////
    //////////////


    class drawStacks {
        constructor(el, data) {
            this.draws = 0;
            this.el = el;
            this.data = data;
            this.initVis();
        }

        initVis() {
            const vis = this;

            // COLOR SCALE
            vis.z = d3.scaleOrdinal()
                .range([COLOR1, COLOR2])
                .domain([0, 1]);

            // CHART
            vis.chartDiv = document.getElementById(vis.el);
            vis.chartDiv.innerHTML = '';
            vis.svg = d3.select(vis.chartDiv).append("svg").attr('class', 'svg-class')

            // APPEND G
            vis.g = vis.svg
                .append('g')
                .attr('class', 'g-class')

            // APPEND y AXIS 
            vis.yAxis = vis.g
                .append('g')
                .attr('class', 'axis y-axis p-16')

            // LINE
            vis.line = vis.g.append("line");

            // BARS
            vis.bars = vis.g.append('g').attr('class', 'bars');

            // TEXT LABS
            vis.texts = vis.g.append('g').attr('class', 'texts p-22 bold')

            this.redraw()
        }

        redraw() {
            const vis = this;
            vis.draws++

            // Extract the width and height that was computed by CSS.
            const width = vis.chartDiv.clientWidth;
            const height = vis.chartDiv.clientHeight;
            const leftRight = width * .045
            vis.MARGIN = { top: window.innerWidth < 1100 ? 5 : window.innerWidth < 1400 ? 0 : 50, right: leftRight, bottom: height * .11, left: leftRight };
            vis.gWIDTH = width - (vis.MARGIN.left + vis.MARGIN.right);
            vis.gHEIGHT = height - (vis.MARGIN.top + vis.MARGIN.bottom);

            // Use the extracted size to set the size of an SVG element.
            vis.svg
                .attr("width", width)
                .attr("height", height)

            // SET G
            vis.g.attr('width', vis.gWIDTH)
                .attr('height', vis.gHEIGHT)
                .attr('transform', 'translate(' + vis.MARGIN.left + ',' + vis.MARGIN.top + ')');

            // X SCALE
            const x = d3.scaleBand()
                .range([0, vis.gWIDTH])
                .paddingInner(0.55)
                .paddingOuter(0.5)
                .domain(vis.data.map(d => d.year));

            // Y SCALE
            const y = d3.scaleLinear()
                .rangeRound([vis.gHEIGHT, 0])
                .domain([-10, 120]);

            // BOTTOM LINE
            vis.line
                .attr("y1", y(0) - 2)
                .attr("y2", y(0) - 2)
                .attr("x1", 0)
                .attr("x2", vis.gWIDTH)
                .attr("stroke-width", 1.4)
                .attr("stroke", "rgb(150, 150, 150)");

            // ADD DATA ////////////////////////////////////////////////
            // JOIN
            const bars = vis.bars
                .selectAll("rect")
                .data(vis.data)

            // EXIT
            bars.exit().remove();

            // UPDATE
            bars
                .attr("width", x.bandwidth())
                .attr("x", d => x(d.year))
                .attr('y', d => y(d.val1) - 2)
                .attr('height', d => Math.abs(y(d.val1) - y(0)))
                .attr('opacity', 1)

            // APPEND
            bars
                .enter()
                .append("rect")
                .attr("fill", d => vis.z(d.fill))
                .attr('class', 'rects')
                .attr("width", x.bandwidth())
                .attr("x", d => x(d.year))
                .attr('y', d => y(d.val1) - 2)
                .attr('height', d => Math.abs(y(d.val1) - y(0)))
                .attr('opacity', vis.draws === 1 ? 0 : 1)
                .transition()
                .duration(1000)
                .delay((d, i) => i * 150 + 100)
                .attr('opacity', 1);

            ///// text numerical labels ///////
            //join
            const texts = vis.texts
                .selectAll("text")
                .data(vis.data)

            // EXIT
            texts.exit().remove();

            // UPDATE
            const yMove = x.bandwidth() * .2;
            const upFactor = window.innerWidth < 1350 ? 1.4 : window.innerWidth < 1450 ? 1.42 : 1.45
            texts
                .attr('x', d => x(d.year) + x.bandwidth() / 2)
                .attr('y', d => y(d.val1) + yMove)
                .attr('dy', (d, i) => i % 2 !== 0 ? 0 : -yMove * upFactor)

            // ENTER
            texts
                .enter()
                .append('text')
                .html(d => d.val1 + '%')
                .attr('fill', (d, i) => i % 2 !== 0 ? 'white' : 'black')
                .attr('dy', (d, i) => i % 2 !== 0 ? 0 : -yMove * upFactor)
                .attr('x', d => x(d.year) + x.bandwidth() / 2)
                .attr('y', d => y(d.val1) + yMove)

            ////////////////////////  X-AXIS text /////////////////////	
            d3.selectAll('.year-text').remove();
            vis.svg
                .selectAll('.year-text')
                .data(vis.data.map(d => d.year))
                .enter()
                .append('text')
                .attr('class', 'year-text p-18 demi')
                .attr('x', d => vis.MARGIN.left + x(d) + x.bandwidth() / 2)
                .attr('y', y(-7) + vis.MARGIN.top + 'px')
                .text((d, i) => i % 2 === 0 ? d : '')

            //////////////////////////////// Y AXIS
            const yAxisCall = d3.axisLeft()
                .tickValues([0, 20, 40, 60, 80, 100])
                .ticks(5)
                .tickFormat(e => e === 100 ? e + '%' : e)

            if (vis.draws <= 1) {
                vis.yAxis
                    .attr('transform', `translate(${vis.MARGIN.left * -.35},0)`)
                    .call(yAxisCall.scale(y).tickSizeOuter([0]))
                    .transition()
                    .delay(0)
                    .duration(1500)
                    .style('opacity', 1)
            } else {
                vis.yAxis
                    .transition()
                    .delay(0)
                    .duration(500)
                    .style('opacity', 1)
                    .attr('transform', `translate(${vis.MARGIN.left * -.35},0)`)
                    .call(yAxisCall.scale(y).tickSizeOuter([0]))
            }
        }
    }

    ///////////////////////////////////////////////////////////////////
    class drawFirstBars {
        constructor(el, data) {
            this.draws = 0;
            this.el = el;
            this.data = data;
            this.initVis();
        }

        initVis() {
            const vis = this;

            // CHART LEFT
            vis.chartDiv = document.getElementById(vis.el);
            vis.chartDiv.innerHTML = '';
            vis.svg = d3.select(vis.chartDiv).append("svg");

            // APPEND G
            vis.g = vis.svg
                .append('g')
                .attr('class', 'g-bars-class')

            // APPEND X AXIS 
            vis.xAxis = vis.g
                .append('g')
                .attr('class', 'axis x-axis')

            vis.bars = vis.g.append('g')

            this.redraw();
        }

        redraw() {
            const vis = this;
            vis.draws += 1;

            // Extract the width and height that was computed by CSS.
            vis.width = vis.chartDiv.clientWidth;
            vis.height = vis.chartDiv.clientHeight;

            vis.marginLeft = vis.width * .02;
            // vis.marginRight = vis.width * .03;
            vis.marginRight = 0;

            vis.MARGIN = { top: 0, right: vis.marginRight, bottom: 0, left: vis.marginLeft };
            vis.gWIDTH = vis.width - (vis.MARGIN.left + vis.MARGIN.right);
            vis.gHEIGHT = vis.height - (vis.MARGIN.top + vis.MARGIN.bottom);

            // Use the extracted size to set the size of an SVG element.
            vis.svg
                .attr("width", vis.width)
                .attr("height", vis.height);

            // SET G
            vis.g
                .attr('width', vis.gWIDTH)
                .attr('height', vis.gHEIGHT)
                .attr('transform', 'translate(' + vis.MARGIN.left + ',' + vis.MARGIN.top + ')');

            // COLOR SCALE
            let z = d3.scaleOrdinal().range([COLOR1, COLOR2]);

            // X SCALE
            let x = d3
                .scaleBand()
                .domain(vis.data.map(d => d.name))
                .range([0, vis.gWIDTH])
                .paddingInner(.38)
                .paddingOuter(.15)

            // Y SCALE
            let y = d3
                .scaleLinear()
                .range([vis.gHEIGHT, 0])
                .domain([-3.5, 7])

            // JOIN
            const barWidth = x.bandwidth() / 2;
            const barGap = barWidth * .15;

            const bars = vis.bars
                .selectAll('rect')
                .data(vis.data)

            // EXIT
            bars.exit().remove()

            // UPDATE
            bars
                .transition()
                .duration(500)
                .attr('width', d => barWidth)
                .attr('x', (d, i) => i % 2 === 0 ? x(d.name) - barGap / 2 + 'px' : x(d.name) + barWidth + barGap / 2 + 'px')
                .attr('y', d => (d.value >= 0 ? y(d.value) - 1 : y(0) + 1))
                .attr('height', d => Math.abs(y(d.value) - y(0)));

            // ENTER
            bars
                .enter()
                .append('rect')
                .attr('fill', (d) => z(d.fill))
                .attr('x', (d, i) => i % 2 === 0 ? x(d.name) - barGap / 2 + 'px' : x(d.name) + barWidth + barGap / 2 + 'px')
                .attr('y', d => y(0))
                .attr('width', d => barWidth)
                .attr('height', 0)
                .transition()
                .duration(1000)
                .delay((d, i) => i * 111 + 666)
                .attr('y', d => (d.value >= 0 ? y(d.value) - 1 : y(0) + 1))
                .attr('height', d => Math.abs(y(d.value) - y(0)))

            // NUMERICAL LABELS
            // JOIN
            const upDown = barWidth * .05;
            const numericalTextLabel = d3.select(vis.chartDiv)
                .selectAll('.num-labs')
                .data(vis.data)

            // EXIT
            numericalTextLabel.exit().remove();

            // UPDATE
            numericalTextLabel
                .transition()
                .duration(500)
                .style('opacity', 1)
                .style('left', (d, i) => i % 2 === 0 ? x(d.name) - barGap / 2 + vis.MARGIN.left + 'px' : x(d.name) + barWidth + barGap / 2 + vis.MARGIN.left + 'px')
                .style('top', (d, i) => d.value > 0 ? y(d.value) - (7.1 * upDown) + 'px' : y(d.value) + upDown + 'px')
                .style('width', barWidth + 'px')

            // ENTER
            numericalTextLabel
                .enter()
                .append('div')
                .attr('class', 'num-labs p-22 bold center')
                .style('position', 'absolute')
                .style('left', (d, i) => i % 2 === 0 ? x(d.name) - barGap / 2 + vis.MARGIN.left + 'px' : x(d.name) + barWidth + barGap / 2 + vis.MARGIN.left + 'px')
                .style('width', barWidth + 'px')
                .style('top', (d, i) => d.value > 0 ? y(d.value) - (7.1 * upDown) + 'px' : y(d.value) + upDown + 'px')
                .html(d => d.value === 0 ? '' : d.value.toFixed(2) + '<sup>%</sup>')
                .style('opacity', 0)
                .transition()
                .duration(1000)
                .delay((d, i) => i * 111 + 888)
                .style('opacity', 1);

            // X AXIS
            const xAxisCall = d3
                .axisBottom()
                .ticks(0)
                .tickValues([])

            if (vis.draws === 1) {
                vis.xAxis
                    .attr('transform', `translate(${0}, ${y(0) - 1})`)
                    .attr('opacity', 0)
                    .attr('width', 0)
                    .transition()
                    .delay(250)
                    .duration(500)
                    .attr('opacity', 1)
                    .attr('width', vis.gWIDTH)
                    .call(xAxisCall.scale(x).tickSizeOuter([0]));
            } else {
                vis.xAxis
                    .transition()
                    .duration(500)
                    .attr('transform', `translate(${0}, ${y(0) - 1})`)
                    .attr('opacity', 1)
                    .call(xAxisCall.scale(x).tickSizeOuter([0]));
            }

        }

    }

    ///////////////////////////////////////////////////////////////////
    class drawBars {
        constructor(el, data, marginLeft, marginRight, words = null) {
            this.draws = 0;
            this.el = el;
            this.data = data;
            this.marginLeft = marginLeft;
            this.marginRight = marginRight;
            this.words = words;
            this.initVis();
        }

        initVis() {
            const vis = this;

            // CHART LEFT
            vis.chartDiv = document.getElementById(vis.el);
            vis.chartDiv.innerHTML = '';
            vis.svg = d3.select(vis.chartDiv).append("svg");

            // APPEND G
            vis.g = vis.svg
                .append('g')
                .attr('class', 'g-bars')

            // APPEND X AXIS 
            vis.xAxis = vis.g
                .append('g')
                .attr('class', 'axis x-axis')

            vis.bars = vis.g.append('g')

            vis.labels = vis.g.append('g').attr('class', 'p-22 bold')

            this.redraw();
        }

        redraw() {
            const vis = this;
            vis.draws += 1;

            // Extract the width and height that was computed by CSS.
            const width = vis.chartDiv.clientWidth;
            const height = vis.chartDiv.clientHeight;

            const MARGIN = { top: 0, right: vis.marginRight, bottom: 0, left: vis.marginLeft };
            const gWIDTH = width - (MARGIN.left + MARGIN.right);
            const gHEIGHT = height - (MARGIN.top + MARGIN.bottom);

            // Use the extracted size to set the size of an SVG element.
            vis.svg
                .attr("width", width)
                .attr("height", height);

            // SET G
            vis.g.attr('width', gWIDTH)
                .attr('height', gHEIGHT)
                .attr('transform', 'translate(' + MARGIN.left + ',' + MARGIN.top + ')');

            // COLOR SCALE
            let z = d3.scaleOrdinal().range([COLOR1, COLOR2]);

            // X SCALE
            let x = d3
                .scaleBand()
                .domain(vis.data.map(d => d.name))
                .range([0, gWIDTH])
                .paddingInner(vis.data[0].value === 0 ? 0 : .05)
                .paddingOuter(vis.data[0].value === 0 ? 0 : .5)

            // Y SCALE
            let y = d3
                .scaleLinear()
                .range([gHEIGHT, 0])
                .domain([-6, 8.8])
                .nice();

            // JOIN
            const bars = vis.bars
                .selectAll('rect')
                .data(vis.data)

            // EXIT
            bars.exit().remove()

            const specialCase = -99; // this will center the bar if its accompanying value is zero
            // UPDATE
            bars
                .transition()
                .duration(500)
                .attr('width', d => d.value === specialCase ? x.bandwidth() * .7 : x.bandwidth())
                .attr('x', d => d.value === specialCase ? x(d.name) - x.bandwidth() * .25 : x(d.name))
                .attr('y', d => (d.value >= 0 ? y(d.value) - 1 : y(0) + 1))
                .attr('height', d => Math.abs(y(d.value) - y(0)));

            // ENTER
            bars
                .enter()
                .append('rect')
                .attr('fill', (d) => z(d.name))
                .attr('x', d => d.value === specialCase ? x(d.name) - x.bandwidth() * .25 : x(d.name))
                .attr('y', d => y(0))
                .attr('width', d => d.value === specialCase ? x.bandwidth() * .7 : x.bandwidth())
                .attr('height', 0)
                .transition()
                .duration(1000)
                .delay(100)
                .attr('y', d => (d.value >= 0 ? y(d.value) - 1 : y(0) + 1))
                .attr('height', d => Math.abs(y(d.value) - y(0)))

            // NUMERICAL LABELS
            // JOIN
            const numericalTextLabel = vis.g
                .selectAll('.num-labels')
                .data(vis.data)

            // EXIT
            numericalTextLabel.exit().remove();

            // UPDATE
            numericalTextLabel
                .transition()
                .duration(500)
                .attr('opacity', 1)
                .attr('x', d => d.value === specialCase ? (x(d.name) + x.bandwidth() / 2) - x.bandwidth() * .35 : x(d.name) + x.bandwidth() / 2)
                .attr('y', d => y(d.value))
                .attr('dy', d => d.value <= 0 ? x.bandwidth() * .18 : -x.bandwidth() * .12)


            // ENTER
            numericalTextLabel
                .enter()
                .append('text')
                .attr('class', 'num-labels p-22 bold')
                .attr('x', d => d.value === specialCase ? (x(d.name) + x.bandwidth() / 2) - x.bandwidth() * .35 : x(d.name) + x.bandwidth() / 2)
                .attr('y', d => y(d.value))
                .attr('dy', d => d.value <= 0 ? x.bandwidth() * .18 : -x.bandwidth() * .12)
                .attr('fill', 'black')
                .text(d => d.value === 0 ? '' : d.value.toFixed(2) + '%')
                .attr('opacity', 0)
                .transition()
                .duration(1000)
                .delay(500)
                .attr('opacity', 1);

            // X AXIS
            const xAxisCall = d3
                .axisBottom()
                .ticks(0)
                .tickValues([])

            if (vis.draws === 1) {
                vis.xAxis
                    .attr('transform', `translate(${0}, ${y(0) - 1})`)
                    .attr('opacity', 0)
                    .attr('width', 0)
                    .transition()
                    .delay(250)
                    .duration(500)
                    .attr('opacity', 1)
                    .attr('width', vis.gWIDTH)
                    .call(xAxisCall.scale(x).tickSizeOuter([0]));
            } else {
                vis.xAxis
                    .transition()
                    .duration(500)
                    .attr('transform', `translate(${0}, ${y(0) - 1})`)
                    .attr('opacity', 1)
                    .call(xAxisCall.scale(x).tickSizeOuter([0]));
            }

            if (vis.words)
                vis.setWords(vis.words)
        }

        setWords(words) {
            const els = document.querySelectorAll('.bc-big');

            els.forEach((el, i) => {
                if (i > 2) {
                    el.innerHTML = words[i - 3];
                }
            })
        }
    }

    // Redraw based on the new size whenever the browser window is resized.
    window.addEventListener("resize", () => redraw());

    function redraw() {
        if (donutChart1)
            donutChart1.redraw()
        if (donutChart2)
            donutChart2.redraw()

        if (barChartFirstSection)
            barChartFirstSection.redraw();

        if (stackedBarChart)
            stackedBarChart.redraw();

        if (barChart0)
            barChartx.redraw();
        if (barChart1)
            barChart0.redraw();
        if (barChart1)
            barChart1.redraw();
        if (barChart2)
            barChart2.redraw();
    }


    function goWeb() {
        window.open("http://capitalgroup.com")
    }


    //////////////////////////////////////////
    //////////////////////////////////////////
    //////////////////////////////////////////
    //////////////////////////////////////////
    //////////////////////////////////////////
    // PARENT FUNCTIONS

    window.addEventListener('keydown', (e) => {
        // D PRESSED
        if (e.key.toLowerCase() === 'd') {
            jumpToDisclosures();
        }

        // UP PRESSED
        if (e.key === 'ArrowUp') {
            scrollToTop(e);
        }

        // UP PRESSED
        if (e.key.toLowerCase() === 'a') {
            try {
                window.parent.toggleAnnotation();
            } catch (error) {
                console.warn(error)
            }
        }

        // H FOR INDEX
        if (window.location.href.match(/([^/]*)$/)[0] != 'index.html' && event.key.toLowerCase() === 'h') {
            // window.parent.fadeToNextPage('home');
            window.parent.trackAnalytics('H-key pressed');
            window.location.href = '../index.html'
        }

        // TOGGLES SIDEBAR MENU WITH 'M'
        if (event.key.toLowerCase() === 'm') {
            window.parent.toggleMainMenu();
            window.parent.trackAnalytics('M-key: toggle menu');
        }

        // LISTENS FOR LEFT AND RIGHT ARROW KEYS ***********************8
        // LEFT ARROW
        if (event.key === 'ArrowLeft') {
            window.parent.trackAnalytics(event.key);

            if (document.getElementById('back-arrow') && document.getElementById('back-arrow').getAttribute('href')) {
                window.parent.fadeToNextPage('left');
            }
        }

        // RIGHT ARROW
        if (event.key === 'ArrowRight') {
            window.parent.trackAnalytics(event.key);
            const NEXT = document.getElementById('forward-arrow');

            if (NEXT) {
                const href = NEXT.getAttribute('href');
                if (href && href !== '#') {
                    window.parent.fadeToNextPage('right');
                }
            }
        }
    })

    function jumpToDisclosures() {
        const jump = document.querySelector(`footer`).getBoundingClientRect().top + window.scrollY;

        $('html, body').animate(
            {
                scrollTop: jump
            },
            900,
            'swing'
        );
    }


</script>

</html>